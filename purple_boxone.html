<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Reaction Timer</title>
  <style>
    #box {
      width: 150px;
      height: 150px;
      background-color: purple; /* Start as purple */
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
    <div class="grid" id="grid"></div>
    <button onclick="startReactionTest()">Test Reaction Time</button>
    <p id="reaction-time"></p>
    
    <script>
        const grid = document.getElementById("grid");
        const gridSize = 10;
        let blueBox = null;
        let startTime = null;
        let timeout = null;

        function createGrid() {
            grid.innerHTML = "";
            for (let row = 0; row < gridSize; row++) {
                for (let col = 0; col < gridSize; col++) {
                    const box = document.createElement("div");
                    box.classList.add("box");
                    if ((row + col) % 2 === 0) {
                        box.classList.add("red");
                    }
                    grid.appendChild(box);
                }
            }
        }

        function changeRandomBox() {
            if (blueBox) {
                blueBox.classList.remove("blue");
            }
            const boxes = document.querySelectorAll(".box");
            blueBox = boxes[Math.floor(Math.random() * boxes.length)];
            blueBox.classList.add("blue");
            startTime = Date.now();
            timeout = setTimeout(changeRandomBox, Math.random() * 9000 + 1000);
        }

        function startReactionTest() {
            createGrid();
            document.getElementById("reaction-time").innerText = "";
            if (timeout) clearTimeout(timeout);
            setTimeout(changeRandomBox, Math.random() * 9000 + 1000);
        }

        grid.addEventListener("click", function (event) {
            if (event.target.classList.contains("blue")) {
                const reactionTime = Date.now() - startTime;
                document.getElementById("reaction-time").innerText = `Reaction Time: ${reactionTime} ms`;
                startReactionTest();
            }
        });

        createGrid();
        setTimeout(changeRandomBox, Math.random() * 9000 + 1000);
    </script>
</body>
</html>
